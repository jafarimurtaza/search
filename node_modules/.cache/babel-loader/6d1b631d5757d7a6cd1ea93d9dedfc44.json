{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport React, { Component } from 'react';\nimport isEqual from 'react-fast-compare';\nimport { shallowEqual, getDisplayName, removeEmptyKey } from './utils';\nimport { InstantSearchConsumer, IndexConsumer } from './context';\n/**\n * Connectors are the HOC used to transform React components\n * into InstantSearch widgets.\n * In order to simplify the construction of such connectors\n * `createConnector` takes a description and transform it into\n * a connector.\n * @param {ConnectorDescription} connectorDesc the description of the connector\n * @return {Connector} a function that wraps a component into\n * an instantsearch connected one.\n */\n\nexport function createConnectorWithoutContext(connectorDesc) {\n  if (!connectorDesc.displayName) {\n    throw new Error('`createConnector` requires you to provide a `displayName` property.');\n  }\n\n  var isWidget = typeof connectorDesc.getSearchParameters === 'function' || typeof connectorDesc.getMetadata === 'function' || typeof connectorDesc.transitionState === 'function';\n  return function (Composed) {\n    var Connector = /*#__PURE__*/function (_Component) {\n      _inherits(Connector, _Component);\n\n      function Connector(props) {\n        var _this;\n\n        _classCallCheck(this, Connector);\n\n        _this = _possibleConstructorReturn(this, _getPrototypeOf(Connector).call(this, props));\n\n        _defineProperty(_assertThisInitialized(_this), \"unsubscribe\", void 0);\n\n        _defineProperty(_assertThisInitialized(_this), \"unregisterWidget\", void 0);\n\n        _defineProperty(_assertThisInitialized(_this), \"isUnmounting\", false);\n\n        _defineProperty(_assertThisInitialized(_this), \"state\", {\n          providedProps: _this.getProvidedProps(_this.props)\n        });\n\n        _defineProperty(_assertThisInitialized(_this), \"refine\", function () {\n          var _ref;\n\n          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n          }\n\n          _this.props.contextValue.onInternalStateUpdate( // refine will always be defined here because the prop is only given conditionally\n          (_ref = connectorDesc.refine).call.apply(_ref, [_assertThisInitialized(_this), _this.props, _this.props.contextValue.store.getState().widgets].concat(args)));\n        });\n\n        _defineProperty(_assertThisInitialized(_this), \"createURL\", function () {\n          var _ref2;\n\n          for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n            args[_key2] = arguments[_key2];\n          }\n\n          return _this.props.contextValue.createHrefForState( // refine will always be defined here because the prop is only given conditionally\n          (_ref2 = connectorDesc.refine).call.apply(_ref2, [_assertThisInitialized(_this), _this.props, _this.props.contextValue.store.getState().widgets].concat(args)));\n        });\n\n        _defineProperty(_assertThisInitialized(_this), \"searchForFacetValues\", function () {\n          var _ref3;\n\n          for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n            args[_key3] = arguments[_key3];\n          }\n\n          _this.props.contextValue.onSearchForFacetValues( // searchForFacetValues will always be defined here because the prop is only given conditionally\n          (_ref3 = connectorDesc.searchForFacetValues).call.apply(_ref3, [_assertThisInitialized(_this), _this.props, _this.props.contextValue.store.getState().widgets].concat(args)));\n        });\n\n        if (connectorDesc.getSearchParameters) {\n          _this.props.contextValue.onSearchParameters(connectorDesc.getSearchParameters.bind(_assertThisInitialized(_this)), {\n            ais: _this.props.contextValue,\n            multiIndexContext: _this.props.indexContextValue\n          }, _this.props, connectorDesc.getMetadata && connectorDesc.getMetadata.bind(_assertThisInitialized(_this)));\n        }\n\n        return _this;\n      }\n\n      _createClass(Connector, [{\n        key: \"componentDidMount\",\n        value: function componentDidMount() {\n          var _this2 = this;\n\n          this.unsubscribe = this.props.contextValue.store.subscribe(function () {\n            if (!_this2.isUnmounting) {\n              _this2.setState({\n                providedProps: _this2.getProvidedProps(_this2.props)\n              });\n            }\n          });\n\n          if (isWidget) {\n            this.unregisterWidget = this.props.contextValue.widgetsManager.registerWidget(this);\n          }\n        }\n      }, {\n        key: \"shouldComponentUpdate\",\n        value: function shouldComponentUpdate(nextProps, nextState) {\n          if (typeof connectorDesc.shouldComponentUpdate === 'function') {\n            return connectorDesc.shouldComponentUpdate.call(this, this.props, nextProps, this.state, nextState);\n          }\n\n          var propsEqual = shallowEqual(this.props, nextProps);\n\n          if (this.state.providedProps === null || nextState.providedProps === null) {\n            if (this.state.providedProps === nextState.providedProps) {\n              return !propsEqual;\n            }\n\n            return true;\n          }\n\n          return !propsEqual || !shallowEqual(this.state.providedProps, nextState.providedProps);\n        }\n      }, {\n        key: \"componentDidUpdate\",\n        value: function componentDidUpdate(prevProps) {\n          if (!isEqual(prevProps, this.props)) {\n            this.setState({\n              providedProps: this.getProvidedProps(this.props)\n            });\n\n            if (isWidget) {\n              this.props.contextValue.widgetsManager.update();\n\n              if (typeof connectorDesc.transitionState === 'function') {\n                this.props.contextValue.onSearchStateChange(connectorDesc.transitionState.call(this, this.props, this.props.contextValue.store.getState().widgets, this.props.contextValue.store.getState().widgets));\n              }\n            }\n          }\n        }\n      }, {\n        key: \"componentWillUnmount\",\n        value: function componentWillUnmount() {\n          this.isUnmounting = true;\n\n          if (this.unsubscribe) {\n            this.unsubscribe();\n          }\n\n          if (this.unregisterWidget) {\n            this.unregisterWidget();\n\n            if (typeof connectorDesc.cleanUp === 'function') {\n              var nextState = connectorDesc.cleanUp.call(this, this.props, this.props.contextValue.store.getState().widgets);\n              this.props.contextValue.store.setState(_objectSpread({}, this.props.contextValue.store.getState(), {\n                widgets: nextState\n              }));\n              this.props.contextValue.onSearchStateChange(removeEmptyKey(nextState));\n            }\n          }\n        }\n      }, {\n        key: \"getProvidedProps\",\n        value: function getProvidedProps(props) {\n          var _this$props$contextVa = this.props.contextValue.store.getState(),\n              widgets = _this$props$contextVa.widgets,\n              results = _this$props$contextVa.results,\n              resultsFacetValues = _this$props$contextVa.resultsFacetValues,\n              searching = _this$props$contextVa.searching,\n              searchingForFacetValues = _this$props$contextVa.searchingForFacetValues,\n              isSearchStalled = _this$props$contextVa.isSearchStalled,\n              metadata = _this$props$contextVa.metadata,\n              error = _this$props$contextVa.error;\n\n          var searchResults = {\n            results: results,\n            searching: searching,\n            searchingForFacetValues: searchingForFacetValues,\n            isSearchStalled: isSearchStalled,\n            error: error\n          };\n          return connectorDesc.getProvidedProps.call(this, props, widgets, searchResults, metadata, // @MAJOR: move this attribute on the `searchResults` it doesn't\n          // makes sense to have it into a separate argument. The search\n          // flags are on the object why not the results?\n          resultsFacetValues);\n        }\n      }, {\n        key: \"getSearchParameters\",\n        value: function getSearchParameters(searchParameters) {\n          if (typeof connectorDesc.getSearchParameters === 'function') {\n            return connectorDesc.getSearchParameters.call(this, searchParameters, this.props, this.props.contextValue.store.getState().widgets);\n          }\n\n          return null;\n        }\n      }, {\n        key: \"getMetadata\",\n        value: function getMetadata(nextWidgetsState) {\n          if (typeof connectorDesc.getMetadata === 'function') {\n            return connectorDesc.getMetadata.call(this, this.props, nextWidgetsState);\n          }\n\n          return {};\n        }\n      }, {\n        key: \"transitionState\",\n        value: function transitionState(prevWidgetsState, nextWidgetsState) {\n          if (typeof connectorDesc.transitionState === 'function') {\n            return connectorDesc.transitionState.call(this, this.props, prevWidgetsState, nextWidgetsState);\n          }\n\n          return nextWidgetsState;\n        }\n      }, {\n        key: \"render\",\n        value: function render() {\n          var _this$props = this.props,\n              contextValue = _this$props.contextValue,\n              props = _objectWithoutProperties(_this$props, [\"contextValue\"]);\n\n          var providedProps = this.state.providedProps;\n\n          if (providedProps === null) {\n            return null;\n          }\n\n          var refineProps = typeof connectorDesc.refine === 'function' ? {\n            refine: this.refine,\n            createURL: this.createURL\n          } : {};\n          var searchForFacetValuesProps = typeof connectorDesc.searchForFacetValues === 'function' ? {\n            searchForItems: this.searchForFacetValues\n          } : {};\n          return React.createElement(Composed, _extends({}, props, providedProps, refineProps, searchForFacetValuesProps));\n        }\n      }]);\n\n      return Connector;\n    }(Component);\n\n    _defineProperty(Connector, \"displayName\", \"\".concat(connectorDesc.displayName, \"(\").concat(getDisplayName(Composed), \")\"));\n\n    _defineProperty(Connector, \"propTypes\", connectorDesc.propTypes);\n\n    _defineProperty(Connector, \"defaultProps\", connectorDesc.defaultProps);\n\n    return Connector;\n  };\n}\n\nvar createConnectorWithContext = function createConnectorWithContext(connectorDesc) {\n  return function (Composed) {\n    var Connector = createConnectorWithoutContext(connectorDesc)(Composed);\n\n    var ConnectorWrapper = function ConnectorWrapper(props) {\n      return React.createElement(InstantSearchConsumer, null, function (contextValue) {\n        return React.createElement(IndexConsumer, null, function (indexContextValue) {\n          return React.createElement(Connector, _extends({\n            contextValue: contextValue,\n            indexContextValue: indexContextValue\n          }, props));\n        });\n      });\n    };\n\n    return ConnectorWrapper;\n  };\n};\n\nexport default createConnectorWithContext;","map":{"version":3,"sources":["C:/Users/Murtaza Jafari/Desktop/product-search/product/searcbox/node_modules/react-instantsearch-core/dist/es/core/createConnector.js"],"names":["_extends","_objectWithoutProperties","_objectSpread","_classCallCheck","_createClass","_possibleConstructorReturn","_getPrototypeOf","_assertThisInitialized","_inherits","_defineProperty","React","Component","isEqual","shallowEqual","getDisplayName","removeEmptyKey","InstantSearchConsumer","IndexConsumer","createConnectorWithoutContext","connectorDesc","displayName","Error","isWidget","getSearchParameters","getMetadata","transitionState","Composed","Connector","_Component","props","_this","call","providedProps","getProvidedProps","_ref","_len","arguments","length","args","Array","_key","contextValue","onInternalStateUpdate","refine","apply","store","getState","widgets","concat","_ref2","_len2","_key2","createHrefForState","_ref3","_len3","_key3","onSearchForFacetValues","searchForFacetValues","onSearchParameters","bind","ais","multiIndexContext","indexContextValue","key","value","componentDidMount","_this2","unsubscribe","subscribe","isUnmounting","setState","unregisterWidget","widgetsManager","registerWidget","shouldComponentUpdate","nextProps","nextState","state","propsEqual","componentDidUpdate","prevProps","update","onSearchStateChange","componentWillUnmount","cleanUp","_this$props$contextVa","results","resultsFacetValues","searching","searchingForFacetValues","isSearchStalled","metadata","error","searchResults","searchParameters","nextWidgetsState","prevWidgetsState","render","_this$props","refineProps","createURL","searchForFacetValuesProps","searchForItems","createElement","propTypes","defaultProps","createConnectorWithContext","ConnectorWrapper"],"mappings":"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","sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport React, { Component } from 'react';\nimport isEqual from 'react-fast-compare';\nimport { shallowEqual, getDisplayName, removeEmptyKey } from './utils';\nimport { InstantSearchConsumer, IndexConsumer } from './context';\n\n/**\n * Connectors are the HOC used to transform React components\n * into InstantSearch widgets.\n * In order to simplify the construction of such connectors\n * `createConnector` takes a description and transform it into\n * a connector.\n * @param {ConnectorDescription} connectorDesc the description of the connector\n * @return {Connector} a function that wraps a component into\n * an instantsearch connected one.\n */\nexport function createConnectorWithoutContext(connectorDesc) {\n  if (!connectorDesc.displayName) {\n    throw new Error('`createConnector` requires you to provide a `displayName` property.');\n  }\n\n  var isWidget = typeof connectorDesc.getSearchParameters === 'function' || typeof connectorDesc.getMetadata === 'function' || typeof connectorDesc.transitionState === 'function';\n  return function (Composed) {\n    var Connector =\n    /*#__PURE__*/\n    function (_Component) {\n      _inherits(Connector, _Component);\n\n      function Connector(props) {\n        var _this;\n\n        _classCallCheck(this, Connector);\n\n        _this = _possibleConstructorReturn(this, _getPrototypeOf(Connector).call(this, props));\n\n        _defineProperty(_assertThisInitialized(_this), \"unsubscribe\", void 0);\n\n        _defineProperty(_assertThisInitialized(_this), \"unregisterWidget\", void 0);\n\n        _defineProperty(_assertThisInitialized(_this), \"isUnmounting\", false);\n\n        _defineProperty(_assertThisInitialized(_this), \"state\", {\n          providedProps: _this.getProvidedProps(_this.props)\n        });\n\n        _defineProperty(_assertThisInitialized(_this), \"refine\", function () {\n          var _ref;\n\n          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n          }\n\n          _this.props.contextValue.onInternalStateUpdate( // refine will always be defined here because the prop is only given conditionally\n          (_ref = connectorDesc.refine).call.apply(_ref, [_assertThisInitialized(_this), _this.props, _this.props.contextValue.store.getState().widgets].concat(args)));\n        });\n\n        _defineProperty(_assertThisInitialized(_this), \"createURL\", function () {\n          var _ref2;\n\n          for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n            args[_key2] = arguments[_key2];\n          }\n\n          return _this.props.contextValue.createHrefForState( // refine will always be defined here because the prop is only given conditionally\n          (_ref2 = connectorDesc.refine).call.apply(_ref2, [_assertThisInitialized(_this), _this.props, _this.props.contextValue.store.getState().widgets].concat(args)));\n        });\n\n        _defineProperty(_assertThisInitialized(_this), \"searchForFacetValues\", function () {\n          var _ref3;\n\n          for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n            args[_key3] = arguments[_key3];\n          }\n\n          _this.props.contextValue.onSearchForFacetValues( // searchForFacetValues will always be defined here because the prop is only given conditionally\n          (_ref3 = connectorDesc.searchForFacetValues).call.apply(_ref3, [_assertThisInitialized(_this), _this.props, _this.props.contextValue.store.getState().widgets].concat(args)));\n        });\n\n        if (connectorDesc.getSearchParameters) {\n          _this.props.contextValue.onSearchParameters(connectorDesc.getSearchParameters.bind(_assertThisInitialized(_this)), {\n            ais: _this.props.contextValue,\n            multiIndexContext: _this.props.indexContextValue\n          }, _this.props, connectorDesc.getMetadata && connectorDesc.getMetadata.bind(_assertThisInitialized(_this)));\n        }\n\n        return _this;\n      }\n\n      _createClass(Connector, [{\n        key: \"componentDidMount\",\n        value: function componentDidMount() {\n          var _this2 = this;\n\n          this.unsubscribe = this.props.contextValue.store.subscribe(function () {\n            if (!_this2.isUnmounting) {\n              _this2.setState({\n                providedProps: _this2.getProvidedProps(_this2.props)\n              });\n            }\n          });\n\n          if (isWidget) {\n            this.unregisterWidget = this.props.contextValue.widgetsManager.registerWidget(this);\n          }\n        }\n      }, {\n        key: \"shouldComponentUpdate\",\n        value: function shouldComponentUpdate(nextProps, nextState) {\n          if (typeof connectorDesc.shouldComponentUpdate === 'function') {\n            return connectorDesc.shouldComponentUpdate.call(this, this.props, nextProps, this.state, nextState);\n          }\n\n          var propsEqual = shallowEqual(this.props, nextProps);\n\n          if (this.state.providedProps === null || nextState.providedProps === null) {\n            if (this.state.providedProps === nextState.providedProps) {\n              return !propsEqual;\n            }\n\n            return true;\n          }\n\n          return !propsEqual || !shallowEqual(this.state.providedProps, nextState.providedProps);\n        }\n      }, {\n        key: \"componentDidUpdate\",\n        value: function componentDidUpdate(prevProps) {\n          if (!isEqual(prevProps, this.props)) {\n            this.setState({\n              providedProps: this.getProvidedProps(this.props)\n            });\n\n            if (isWidget) {\n              this.props.contextValue.widgetsManager.update();\n\n              if (typeof connectorDesc.transitionState === 'function') {\n                this.props.contextValue.onSearchStateChange(connectorDesc.transitionState.call(this, this.props, this.props.contextValue.store.getState().widgets, this.props.contextValue.store.getState().widgets));\n              }\n            }\n          }\n        }\n      }, {\n        key: \"componentWillUnmount\",\n        value: function componentWillUnmount() {\n          this.isUnmounting = true;\n\n          if (this.unsubscribe) {\n            this.unsubscribe();\n          }\n\n          if (this.unregisterWidget) {\n            this.unregisterWidget();\n\n            if (typeof connectorDesc.cleanUp === 'function') {\n              var nextState = connectorDesc.cleanUp.call(this, this.props, this.props.contextValue.store.getState().widgets);\n              this.props.contextValue.store.setState(_objectSpread({}, this.props.contextValue.store.getState(), {\n                widgets: nextState\n              }));\n              this.props.contextValue.onSearchStateChange(removeEmptyKey(nextState));\n            }\n          }\n        }\n      }, {\n        key: \"getProvidedProps\",\n        value: function getProvidedProps(props) {\n          var _this$props$contextVa = this.props.contextValue.store.getState(),\n              widgets = _this$props$contextVa.widgets,\n              results = _this$props$contextVa.results,\n              resultsFacetValues = _this$props$contextVa.resultsFacetValues,\n              searching = _this$props$contextVa.searching,\n              searchingForFacetValues = _this$props$contextVa.searchingForFacetValues,\n              isSearchStalled = _this$props$contextVa.isSearchStalled,\n              metadata = _this$props$contextVa.metadata,\n              error = _this$props$contextVa.error;\n\n          var searchResults = {\n            results: results,\n            searching: searching,\n            searchingForFacetValues: searchingForFacetValues,\n            isSearchStalled: isSearchStalled,\n            error: error\n          };\n          return connectorDesc.getProvidedProps.call(this, props, widgets, searchResults, metadata, // @MAJOR: move this attribute on the `searchResults` it doesn't\n          // makes sense to have it into a separate argument. The search\n          // flags are on the object why not the results?\n          resultsFacetValues);\n        }\n      }, {\n        key: \"getSearchParameters\",\n        value: function getSearchParameters(searchParameters) {\n          if (typeof connectorDesc.getSearchParameters === 'function') {\n            return connectorDesc.getSearchParameters.call(this, searchParameters, this.props, this.props.contextValue.store.getState().widgets);\n          }\n\n          return null;\n        }\n      }, {\n        key: \"getMetadata\",\n        value: function getMetadata(nextWidgetsState) {\n          if (typeof connectorDesc.getMetadata === 'function') {\n            return connectorDesc.getMetadata.call(this, this.props, nextWidgetsState);\n          }\n\n          return {};\n        }\n      }, {\n        key: \"transitionState\",\n        value: function transitionState(prevWidgetsState, nextWidgetsState) {\n          if (typeof connectorDesc.transitionState === 'function') {\n            return connectorDesc.transitionState.call(this, this.props, prevWidgetsState, nextWidgetsState);\n          }\n\n          return nextWidgetsState;\n        }\n      }, {\n        key: \"render\",\n        value: function render() {\n          var _this$props = this.props,\n              contextValue = _this$props.contextValue,\n              props = _objectWithoutProperties(_this$props, [\"contextValue\"]);\n\n          var providedProps = this.state.providedProps;\n\n          if (providedProps === null) {\n            return null;\n          }\n\n          var refineProps = typeof connectorDesc.refine === 'function' ? {\n            refine: this.refine,\n            createURL: this.createURL\n          } : {};\n          var searchForFacetValuesProps = typeof connectorDesc.searchForFacetValues === 'function' ? {\n            searchForItems: this.searchForFacetValues\n          } : {};\n          return React.createElement(Composed, _extends({}, props, providedProps, refineProps, searchForFacetValuesProps));\n        }\n      }]);\n\n      return Connector;\n    }(Component);\n\n    _defineProperty(Connector, \"displayName\", \"\".concat(connectorDesc.displayName, \"(\").concat(getDisplayName(Composed), \")\"));\n\n    _defineProperty(Connector, \"propTypes\", connectorDesc.propTypes);\n\n    _defineProperty(Connector, \"defaultProps\", connectorDesc.defaultProps);\n\n    return Connector;\n  };\n}\n\nvar createConnectorWithContext = function createConnectorWithContext(connectorDesc) {\n  return function (Composed) {\n    var Connector = createConnectorWithoutContext(connectorDesc)(Composed);\n\n    var ConnectorWrapper = function ConnectorWrapper(props) {\n      return React.createElement(InstantSearchConsumer, null, function (contextValue) {\n        return React.createElement(IndexConsumer, null, function (indexContextValue) {\n          return React.createElement(Connector, _extends({\n            contextValue: contextValue,\n            indexContextValue: indexContextValue\n          }, props));\n        });\n      });\n    };\n\n    return ConnectorWrapper;\n  };\n};\n\nexport default createConnectorWithContext;"]},"metadata":{},"sourceType":"module"}