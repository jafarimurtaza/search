{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport PropTypes from 'prop-types';\nimport createConnector from '../core/createConnector';\nimport { find } from '../core/utils';\nimport { cleanUpValue, refineValue, getCurrentRefinementValue, getResults, getIndexId } from '../core/indexUtils';\n\nfunction stringifyItem(item) {\n  if (typeof item.start === 'undefined' && typeof item.end === 'undefined') {\n    return '';\n  }\n\n  var start = typeof item.start !== 'undefined' ? item.start : '';\n  var end = typeof item.end !== 'undefined' ? item.end : '';\n  return \"\".concat(start, \":\").concat(end);\n}\n\nfunction parseItem(value) {\n  if (value.length === 0) {\n    return {\n      start: null,\n      end: null\n    };\n  }\n\n  var _value$split = value.split(':'),\n      _value$split2 = _slicedToArray(_value$split, 2),\n      startStr = _value$split2[0],\n      endStr = _value$split2[1];\n\n  return {\n    start: startStr.length > 0 ? parseInt(startStr, 10) : null,\n    end: endStr.length > 0 ? parseInt(endStr, 10) : null\n  };\n}\n\nvar namespace = 'multiRange';\n\nfunction getId(props) {\n  return props.attribute;\n}\n\nfunction getCurrentRefinement(props, searchState, context) {\n  return getCurrentRefinementValue(props, searchState, context, \"\".concat(namespace, \".\").concat(getId(props)), '', function (currentRefinement) {\n    if (currentRefinement === '') {\n      return '';\n    }\n\n    return currentRefinement;\n  });\n}\n\nfunction isRefinementsRangeIncludesInsideItemRange(stats, start, end) {\n  return stats.min > start && stats.min < end || stats.max > start && stats.max < end;\n}\n\nfunction isItemRangeIncludedInsideRefinementsRange(stats, start, end) {\n  return start > stats.min && start < stats.max || end > stats.min && end < stats.max;\n}\n\nfunction itemHasRefinement(attribute, results, value) {\n  var stats = results.getFacetByName(attribute) ? results.getFacetStats(attribute) : null;\n  var range = value.split(':');\n  var start = Number(range[0]) === 0 || value === '' ? Number.NEGATIVE_INFINITY : Number(range[0]);\n  var end = Number(range[1]) === 0 || value === '' ? Number.POSITIVE_INFINITY : Number(range[1]);\n  return !(Boolean(stats) && (isRefinementsRangeIncludesInsideItemRange(stats, start, end) || isItemRangeIncludedInsideRefinementsRange(stats, start, end)));\n}\n\nfunction _refine(props, searchState, nextRefinement, context) {\n  var nextValue = _defineProperty({}, getId(props, searchState), nextRefinement);\n\n  var resetPage = true;\n  return refineValue(searchState, nextValue, context, resetPage, namespace);\n}\n\nfunction _cleanUp(props, searchState, context) {\n  return cleanUpValue(searchState, context, \"\".concat(namespace, \".\").concat(getId(props)));\n}\n/**\n * connectNumericMenu connector provides the logic to build a widget that will\n * give the user the ability to select a range value for a numeric attribute.\n * Ranges are defined statically.\n * @name connectNumericMenu\n * @requirements The attribute passed to the `attribute` prop must be holding numerical values.\n * @kind connector\n * @propType {string} attribute - the name of the attribute in the records\n * @propType {{label: string, start: number, end: number}[]} items - List of options. With a text label, and upper and lower bounds.\n * @propType {string} [defaultRefinement] - the value of the item selected by default, follow the shape of a `string` with a pattern of `'{start}:{end}'`.\n * @propType {function} [transformItems] - Function to modify the items being displayed, e.g. for filtering or sorting them. Takes an items as parameter and expects it back in return.\n * @providedPropType {function} refine - a function to select a range.\n * @providedPropType {function} createURL - a function to generate a URL for the corresponding search state\n * @providedPropType {string} currentRefinement - the refinement currently applied.  follow the shape of a `string` with a pattern of `'{start}:{end}'` which corresponds to the current selected item. For instance, when the selected item is `{start: 10, end: 20}`, the searchState of the widget is `'10:20'`. When `start` isn't defined, the searchState of the widget is `':{end}'`, and the same way around when `end` isn't defined. However, when neither `start` nor `end` are defined, the searchState is an empty string.\n * @providedPropType {array.<{isRefined: boolean, label: string, value: string, isRefined: boolean, noRefinement: boolean}>} items - the list of ranges the NumericMenu can display.\n */\n\n\nexport default createConnector({\n  displayName: 'AlgoliaNumericMenu',\n  propTypes: {\n    id: PropTypes.string,\n    attribute: PropTypes.string.isRequired,\n    items: PropTypes.arrayOf(PropTypes.shape({\n      label: PropTypes.node,\n      start: PropTypes.number,\n      end: PropTypes.number\n    })).isRequired,\n    transformItems: PropTypes.func\n  },\n  getProvidedProps: function getProvidedProps(props, searchState, searchResults) {\n    var attribute = props.attribute;\n    var currentRefinement = getCurrentRefinement(props, searchState, {\n      ais: props.contextValue,\n      multiIndexContext: props.indexContextValue\n    });\n    var results = getResults(searchResults, {\n      ais: props.contextValue,\n      multiIndexContext: props.indexContextValue\n    });\n    var items = props.items.map(function (item) {\n      var value = stringifyItem(item);\n      return {\n        label: item.label,\n        value: value,\n        isRefined: value === currentRefinement,\n        noRefinement: results ? itemHasRefinement(getId(props), results, value) : false\n      };\n    });\n    var stats = results && results.getFacetByName(attribute) ? results.getFacetStats(attribute) : null;\n    var refinedItem = find(items, function (item) {\n      return item.isRefined === true;\n    });\n\n    if (!items.some(function (item) {\n      return item.value === '';\n    })) {\n      items.push({\n        value: '',\n        isRefined: refinedItem === undefined,\n        noRefinement: !stats,\n        label: 'All'\n      });\n    }\n\n    var transformedItems = props.transformItems ? props.transformItems(items) : items;\n    return {\n      items: transformedItems,\n      currentRefinement: currentRefinement,\n      canRefine: transformedItems.length > 0 && transformedItems.some(function (item) {\n        return item.noRefinement === false;\n      })\n    };\n  },\n  refine: function refine(props, searchState, nextRefinement) {\n    return _refine(props, searchState, nextRefinement, {\n      ais: props.contextValue,\n      multiIndexContext: props.indexContextValue\n    });\n  },\n  cleanUp: function cleanUp(props, searchState) {\n    return _cleanUp(props, searchState, {\n      ais: props.contextValue,\n      multiIndexContext: props.indexContextValue\n    });\n  },\n  getSearchParameters: function getSearchParameters(searchParameters, props, searchState) {\n    var attribute = props.attribute;\n\n    var _parseItem = parseItem(getCurrentRefinement(props, searchState, {\n      ais: props.contextValue,\n      multiIndexContext: props.indexContextValue\n    })),\n        start = _parseItem.start,\n        end = _parseItem.end;\n\n    searchParameters = searchParameters.addDisjunctiveFacet(attribute);\n\n    if (typeof start === 'number') {\n      searchParameters = searchParameters.addNumericRefinement(attribute, '>=', start);\n    }\n\n    if (typeof end === 'number') {\n      searchParameters = searchParameters.addNumericRefinement(attribute, '<=', end);\n    }\n\n    return searchParameters;\n  },\n  getMetadata: function getMetadata(props, searchState) {\n    var id = getId(props);\n    var value = getCurrentRefinement(props, searchState, {\n      ais: props.contextValue,\n      multiIndexContext: props.indexContextValue\n    });\n    var items = [];\n    var index = getIndexId({\n      ais: props.contextValue,\n      multiIndexContext: props.indexContextValue\n    });\n\n    if (value !== '') {\n      var _find = find(props.items, function (item) {\n        return stringifyItem(item) === value;\n      }),\n          label = _find.label;\n\n      items.push({\n        label: \"\".concat(props.attribute, \": \").concat(label),\n        attribute: props.attribute,\n        currentRefinement: label,\n        value: function value(nextState) {\n          return _refine(props, nextState, '', {\n            ais: props.contextValue,\n            multiIndexContext: props.indexContextValue\n          });\n        }\n      });\n    }\n\n    return {\n      id: id,\n      index: index,\n      items: items\n    };\n  }\n});","map":{"version":3,"sources":["C:/Users/Murtaza Jafari/Desktop/product-search/product/searcbox/node_modules/react-instantsearch-core/dist/es/connectors/connectNumericMenu.js"],"names":["_defineProperty","_slicedToArray","PropTypes","createConnector","find","cleanUpValue","refineValue","getCurrentRefinementValue","getResults","getIndexId","stringifyItem","item","start","end","concat","parseItem","value","length","_value$split","split","_value$split2","startStr","endStr","parseInt","namespace","getId","props","attribute","getCurrentRefinement","searchState","context","currentRefinement","isRefinementsRangeIncludesInsideItemRange","stats","min","max","isItemRangeIncludedInsideRefinementsRange","itemHasRefinement","results","getFacetByName","getFacetStats","range","Number","NEGATIVE_INFINITY","POSITIVE_INFINITY","Boolean","_refine","nextRefinement","nextValue","resetPage","_cleanUp","displayName","propTypes","id","string","isRequired","items","arrayOf","shape","label","node","number","transformItems","func","getProvidedProps","searchResults","ais","contextValue","multiIndexContext","indexContextValue","map","isRefined","noRefinement","refinedItem","some","push","undefined","transformedItems","canRefine","refine","cleanUp","getSearchParameters","searchParameters","_parseItem","addDisjunctiveFacet","addNumericRefinement","getMetadata","index","_find","nextState"],"mappings":"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","sourcesContent":["import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport PropTypes from 'prop-types';\nimport createConnector from '../core/createConnector';\nimport { find } from '../core/utils';\nimport { cleanUpValue, refineValue, getCurrentRefinementValue, getResults, getIndexId } from '../core/indexUtils';\n\nfunction stringifyItem(item) {\n  if (typeof item.start === 'undefined' && typeof item.end === 'undefined') {\n    return '';\n  }\n\n  var start = typeof item.start !== 'undefined' ? item.start : '';\n  var end = typeof item.end !== 'undefined' ? item.end : '';\n  return \"\".concat(start, \":\").concat(end);\n}\n\nfunction parseItem(value) {\n  if (value.length === 0) {\n    return {\n      start: null,\n      end: null\n    };\n  }\n\n  var _value$split = value.split(':'),\n      _value$split2 = _slicedToArray(_value$split, 2),\n      startStr = _value$split2[0],\n      endStr = _value$split2[1];\n\n  return {\n    start: startStr.length > 0 ? parseInt(startStr, 10) : null,\n    end: endStr.length > 0 ? parseInt(endStr, 10) : null\n  };\n}\n\nvar namespace = 'multiRange';\n\nfunction getId(props) {\n  return props.attribute;\n}\n\nfunction getCurrentRefinement(props, searchState, context) {\n  return getCurrentRefinementValue(props, searchState, context, \"\".concat(namespace, \".\").concat(getId(props)), '', function (currentRefinement) {\n    if (currentRefinement === '') {\n      return '';\n    }\n\n    return currentRefinement;\n  });\n}\n\nfunction isRefinementsRangeIncludesInsideItemRange(stats, start, end) {\n  return stats.min > start && stats.min < end || stats.max > start && stats.max < end;\n}\n\nfunction isItemRangeIncludedInsideRefinementsRange(stats, start, end) {\n  return start > stats.min && start < stats.max || end > stats.min && end < stats.max;\n}\n\nfunction itemHasRefinement(attribute, results, value) {\n  var stats = results.getFacetByName(attribute) ? results.getFacetStats(attribute) : null;\n  var range = value.split(':');\n  var start = Number(range[0]) === 0 || value === '' ? Number.NEGATIVE_INFINITY : Number(range[0]);\n  var end = Number(range[1]) === 0 || value === '' ? Number.POSITIVE_INFINITY : Number(range[1]);\n  return !(Boolean(stats) && (isRefinementsRangeIncludesInsideItemRange(stats, start, end) || isItemRangeIncludedInsideRefinementsRange(stats, start, end)));\n}\n\nfunction _refine(props, searchState, nextRefinement, context) {\n  var nextValue = _defineProperty({}, getId(props, searchState), nextRefinement);\n\n  var resetPage = true;\n  return refineValue(searchState, nextValue, context, resetPage, namespace);\n}\n\nfunction _cleanUp(props, searchState, context) {\n  return cleanUpValue(searchState, context, \"\".concat(namespace, \".\").concat(getId(props)));\n}\n/**\n * connectNumericMenu connector provides the logic to build a widget that will\n * give the user the ability to select a range value for a numeric attribute.\n * Ranges are defined statically.\n * @name connectNumericMenu\n * @requirements The attribute passed to the `attribute` prop must be holding numerical values.\n * @kind connector\n * @propType {string} attribute - the name of the attribute in the records\n * @propType {{label: string, start: number, end: number}[]} items - List of options. With a text label, and upper and lower bounds.\n * @propType {string} [defaultRefinement] - the value of the item selected by default, follow the shape of a `string` with a pattern of `'{start}:{end}'`.\n * @propType {function} [transformItems] - Function to modify the items being displayed, e.g. for filtering or sorting them. Takes an items as parameter and expects it back in return.\n * @providedPropType {function} refine - a function to select a range.\n * @providedPropType {function} createURL - a function to generate a URL for the corresponding search state\n * @providedPropType {string} currentRefinement - the refinement currently applied.  follow the shape of a `string` with a pattern of `'{start}:{end}'` which corresponds to the current selected item. For instance, when the selected item is `{start: 10, end: 20}`, the searchState of the widget is `'10:20'`. When `start` isn't defined, the searchState of the widget is `':{end}'`, and the same way around when `end` isn't defined. However, when neither `start` nor `end` are defined, the searchState is an empty string.\n * @providedPropType {array.<{isRefined: boolean, label: string, value: string, isRefined: boolean, noRefinement: boolean}>} items - the list of ranges the NumericMenu can display.\n */\n\n\nexport default createConnector({\n  displayName: 'AlgoliaNumericMenu',\n  propTypes: {\n    id: PropTypes.string,\n    attribute: PropTypes.string.isRequired,\n    items: PropTypes.arrayOf(PropTypes.shape({\n      label: PropTypes.node,\n      start: PropTypes.number,\n      end: PropTypes.number\n    })).isRequired,\n    transformItems: PropTypes.func\n  },\n  getProvidedProps: function getProvidedProps(props, searchState, searchResults) {\n    var attribute = props.attribute;\n    var currentRefinement = getCurrentRefinement(props, searchState, {\n      ais: props.contextValue,\n      multiIndexContext: props.indexContextValue\n    });\n    var results = getResults(searchResults, {\n      ais: props.contextValue,\n      multiIndexContext: props.indexContextValue\n    });\n    var items = props.items.map(function (item) {\n      var value = stringifyItem(item);\n      return {\n        label: item.label,\n        value: value,\n        isRefined: value === currentRefinement,\n        noRefinement: results ? itemHasRefinement(getId(props), results, value) : false\n      };\n    });\n    var stats = results && results.getFacetByName(attribute) ? results.getFacetStats(attribute) : null;\n    var refinedItem = find(items, function (item) {\n      return item.isRefined === true;\n    });\n\n    if (!items.some(function (item) {\n      return item.value === '';\n    })) {\n      items.push({\n        value: '',\n        isRefined: refinedItem === undefined,\n        noRefinement: !stats,\n        label: 'All'\n      });\n    }\n\n    var transformedItems = props.transformItems ? props.transformItems(items) : items;\n    return {\n      items: transformedItems,\n      currentRefinement: currentRefinement,\n      canRefine: transformedItems.length > 0 && transformedItems.some(function (item) {\n        return item.noRefinement === false;\n      })\n    };\n  },\n  refine: function refine(props, searchState, nextRefinement) {\n    return _refine(props, searchState, nextRefinement, {\n      ais: props.contextValue,\n      multiIndexContext: props.indexContextValue\n    });\n  },\n  cleanUp: function cleanUp(props, searchState) {\n    return _cleanUp(props, searchState, {\n      ais: props.contextValue,\n      multiIndexContext: props.indexContextValue\n    });\n  },\n  getSearchParameters: function getSearchParameters(searchParameters, props, searchState) {\n    var attribute = props.attribute;\n\n    var _parseItem = parseItem(getCurrentRefinement(props, searchState, {\n      ais: props.contextValue,\n      multiIndexContext: props.indexContextValue\n    })),\n        start = _parseItem.start,\n        end = _parseItem.end;\n\n    searchParameters = searchParameters.addDisjunctiveFacet(attribute);\n\n    if (typeof start === 'number') {\n      searchParameters = searchParameters.addNumericRefinement(attribute, '>=', start);\n    }\n\n    if (typeof end === 'number') {\n      searchParameters = searchParameters.addNumericRefinement(attribute, '<=', end);\n    }\n\n    return searchParameters;\n  },\n  getMetadata: function getMetadata(props, searchState) {\n    var id = getId(props);\n    var value = getCurrentRefinement(props, searchState, {\n      ais: props.contextValue,\n      multiIndexContext: props.indexContextValue\n    });\n    var items = [];\n    var index = getIndexId({\n      ais: props.contextValue,\n      multiIndexContext: props.indexContextValue\n    });\n\n    if (value !== '') {\n      var _find = find(props.items, function (item) {\n        return stringifyItem(item) === value;\n      }),\n          label = _find.label;\n\n      items.push({\n        label: \"\".concat(props.attribute, \": \").concat(label),\n        attribute: props.attribute,\n        currentRefinement: label,\n        value: function value(nextState) {\n          return _refine(props, nextState, '', {\n            ais: props.contextValue,\n            multiIndexContext: props.indexContextValue\n          });\n        }\n      });\n    }\n\n    return {\n      id: id,\n      index: index,\n      items: items\n    };\n  }\n});"]},"metadata":{},"sourceType":"module"}